import { db, schema } from './index.js';
import { eq } from 'drizzle-orm';

const departmentsData = [
  {
    code: 'secretary',
    name: 'สำนักปลัดเทศบาล',
    description: 'งานบริหารทั่วไป ทะเบียนราษฎร ป้องกันสาธารณภัย ความปลอดภัยชุมชน',
    keywords: JSON.stringify([
      'ทั่วไป', 'ทะเบียน', 'บัตรประชาชน', 'ทะเบียนบ้าน', 'แจ้งเกิด', 'แจ้งตาย',
      'ไฟไหม้', 'น้ำท่วม', 'ภัยพิบัติ', 'วาตภัย', 'เสียงดัง', 'เสียงรบกวน',
      'ทุจริต', 'เจ้าหน้าที่', 'ร้องเรียนพฤติกรรม', 'ความปลอดภัย', 'สาธารณภัย',
    ]),
  },
  {
    code: 'finance',
    name: 'กองคลัง',
    description: 'ภาษี ค่าธรรมเนียม จัดซื้อจัดจ้าง การเงิน',
    keywords: JSON.stringify([
      'ภาษี', 'ค่าธรรมเนียม', 'ภาษีที่ดิน', 'ภาษีป้าย', 'ภาษีโรงเรือน',
      'จัดซื้อจัดจ้าง', 'งบประมาณ', 'ใบเสร็จ', 'ค่าปรับ', 'เงิน',
    ]),
  },
  {
    code: 'engineering',
    name: 'กองช่าง',
    description: 'ถนน ไฟฟ้าสาธารณะ ท่อระบายน้ำ ประปา ก่อสร้าง สวนสาธารณะ',
    keywords: JSON.stringify([
      'ถนน', 'ถนนพัง', 'ถนนชำรุด', 'หลุม', 'บ่อ', 'ทางเท้า',
      'ไฟฟ้า', 'ไฟทาง', 'ไฟดับ', 'ไฟส่องทาง', 'เสาไฟ', 'หลอดไฟ',
      'ท่อระบายน้ำ', 'ท่อตัน', 'น้ำท่วมขัง', 'ท่อแตก',
      'ประปา', 'น้ำประปา', 'น้ำไม่ไหล', 'น้ำขุ่น',
      'ก่อสร้าง', 'อาคาร', 'สะพาน', 'สวนสาธารณะ', 'ผังเมือง',
    ]),
  },
  {
    code: 'health',
    name: 'กองสาธารณสุขและสิ่งแวดล้อม',
    description: 'ขยะ มลพิษ สุนัขจรจัด โรคระบาด สุขาภิบาล อาหาร',
    keywords: JSON.stringify([
      'ขยะ', 'ไม่เก็บขยะ', 'กลิ่นเหม็น', 'ถังขยะ',
      'น้ำเสีย', 'มลพิษ', 'ฝุ่น', 'ควัน', 'อากาศ',
      'สุนัข', 'สุนัขจรจัด', 'แมว', 'สัตว์', 'งู', 'แมลง',
      'อาหาร', 'ร้านอาหาร', 'สุขลักษณะ', 'ไม่สะอาด',
      'โรคระบาด', 'ไข้เลือดออก', 'โรค', 'ยุง', 'สุขภาพ',
      'เหตุรำคาญ', 'สิ่งแวดล้อม',
    ]),
  },
  {
    code: 'education',
    name: 'กองการศึกษา',
    description: 'ศูนย์เด็กเล็ก เยาวชน กีฬา วัฒนธรรม ประเพณี',
    keywords: JSON.stringify([
      'เด็ก', 'ศูนย์เด็กเล็ก', 'เด็กเล็ก', 'อนุบาล',
      'เยาวชน', 'การศึกษา', 'โรงเรียน',
      'กีฬา', 'สนามกีฬา', 'ออกกำลังกาย',
      'วัฒนธรรม', 'ประเพณี', 'ศาสนา', 'วัด', 'งานบุญ',
    ]),
  },
  {
    code: 'strategy',
    name: 'กองยุทธศาสตร์และงบประมาณ',
    description: 'แผนพัฒนา ระบบ IT เว็บไซต์ ข้อเสนอแนะนโยบาย',
    keywords: JSON.stringify([
      'แผนพัฒนา', 'นโยบาย', 'ข้อเสนอแนะ', 'ข้อคิดเห็น',
      'เว็บไซต์', 'IT', 'ระบบ', 'แอป', 'ประชาสัมพันธ์',
      'งบประมาณ', 'โครงการ',
    ]),
  },
];

export async function seedDepartments() {
  for (const dept of departmentsData) {
    const [existing] = await db.select().from(schema.departments).where(eq(schema.departments.code, dept.code));
    if (!existing) {
      await db.insert(schema.departments).values(dept);
      console.log(`  ✅ Seeded: ${dept.name}`);
    }
  }
  console.log('  ✅ Departments ready');
}
